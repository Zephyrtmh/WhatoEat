{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Zephy\\\\OneDrive\\\\Documents\\\\Personal\\\\Coding\\\\Coding Projects\\\\WhatoEat\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import logo from'./logo.svg';import{Component,useEffect}from'react';import'./App.css';import GoogleMap from'./components/GoogleMap.js';import Shoplist from'./components/Shoplist.js';import Sidebar from'./components/Sidebar';import Navbar from'./components/Navbar';import{FoodContext}from'./Context/FoodContext';import{filterShops,getCurrLocation,getPlaces,random_food}from'./utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.setCurrLoc=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(location){var places;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({location:{\"lat\":location.lat,\"lng\":location.lng}});console.log(\"new location: \",_this.state.location);_context.next=4;return getPlaces(_this.state.foodItem,_this.state.location.lat,_this.state.location.lng);case 4:places=_context.sent;_this.setState({places:places});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.setFoodItem=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(food){var places;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({foodItem:food});console.log(food);if(!(_this.state.foodItem!='')){_context2.next=7;break;}_context2.next=5;return getPlaces(_this.state.foodItem,_this.state.location.lat,_this.state.location.lng);case 5:places=_context2.sent;_this.setState({places:places});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.state={extended:false,foodItem:'',setFoodItem:_this.setFoodItem,location:{\"lat\":'1.3521',\"lng\":'103.8198'},places:[],activePlace:''};_this.handleMenuClick=_this.handleMenuClick.bind(_assertThisInitialized(_this));_this.setFoodItem=_this.setFoodItem(_assertThisInitialized(_this));_this.handleSortButton=_this.handleSortButton.bind(_assertThisInitialized(_this));_this.handleRandomButtonClick=_this.handleRandomButtonClick.bind(_assertThisInitialized(_this));_this.handleShopGridClick=_this.handleShopGridClick.bind(_assertThisInitialized(_this));_this.setCurrLoc=_this.setCurrLoc.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"handleMenuClick\",value:function handleMenuClick(){this.setState({extended:!this.state.extended});}},{key:\"handleSortButton\",value:function handleSortButton(choice){// choice -> \"distance\" or \"rating\"\nvar sortedShops=filterShops(choice,this.state.places,this.state.location);this.setState({places:sortedShops});console.log(\"shoplist sorted\",sortedShops);}},{key:\"handleRandomButtonClick\",value:function(){var _handleRandomButtonClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this2=this;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0://randomise places\nrandom_food([]).then(function(selectFood){_this2.state.setFoodItem(selectFood.food_name);});case 1:case\"end\":return _context3.stop();}}},_callee3);}));function handleRandomButtonClick(){return _handleRandomButtonClick.apply(this,arguments);}return handleRandomButtonClick;}()},{key:\"handleShopGridClick\",value:function handleShopGridClick(activePlace){this.setState({activePlace:activePlace});console.log(\"activePlace: \",activePlace);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;console.log(\"location updated\");if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var lat=position.coords.latitude;var lng=position.coords.longitude;_this3.setState({location:{\"lat\":lat,\"lng\":lng}});console.log(_this3.state.location);});}else{console.log(\"geolocation not available\");}}},{key:\"render\",value:function render(){var _this4=this;console.log(\"app rendered\");if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var lat=position.coords.latitude;var lng=position.coords.longitude;_this4.setState({location:{\"lat\":lat,\"lng\":lng}});console.log(_this4.state.location);});}else{console.log(\"geolocation not available\");}return/*#__PURE__*/_jsx(FoodContext.Provider,{value:this.state,children:/*#__PURE__*/_jsxs(\"body\",{className:\"body-container\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(GoogleMap,{foodItem:this.state.foodItem!=''?this.state.foodItem:this.state.placeholder,location:this.state.location,places:this.state.places,activePlace:this.state.activePlace,setCurrLoc:this.setCurrLoc})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-container\",children:/*#__PURE__*/_jsx(Sidebar,{extended:this.state.extended,setFoodItem:this.setFoodItem})}),/*#__PURE__*/_jsx(Navbar,{onMenuClick:this.handleMenuClick,onRandomClick:this.handleRandomButtonClick})]}),/*#__PURE__*/_jsx(Shoplist,{shops:this.state.places,extended:this.state.extended,location:this.state.location,handleSortButton:this.handleSortButton,onShopGridClick:this.handleShopGridClick})]})});}}]);return App;}(Component);App.contextType=FoodContext;export default App;","map":{"version":3,"names":["logo","Component","useEffect","GoogleMap","Shoplist","Sidebar","Navbar","FoodContext","filterShops","getCurrLocation","getPlaces","random_food","App","props","setCurrLoc","location","setState","lat","lng","console","log","state","foodItem","places","setFoodItem","food","extended","activePlace","handleMenuClick","bind","handleSortButton","handleRandomButtonClick","handleShopGridClick","choice","sortedShops","then","selectFood","food_name","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","placeholder","contextType"],"sources":["C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/src/App.js"],"sourcesContent":["import logo from './logo.svg';\r\nimport { Component, useEffect } from 'react';\r\nimport './App.css';\r\nimport GoogleMap from './components/GoogleMap.js';\r\nimport Shoplist from './components/Shoplist.js';\r\n\r\nimport Sidebar from './components/Sidebar';\r\nimport Navbar from './components/Navbar';\r\nimport { FoodContext } from './Context/FoodContext';\r\nimport { filterShops, getCurrLocation, getPlaces, random_food } from './utils/utils';\r\n\r\n\r\nclass App extends Component {\r\n\r\n  static contextType = FoodContext;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      extended: false,\r\n      foodItem: '',\r\n      setFoodItem: this.setFoodItem,\r\n      location: {\"lat\": '1.3521', \"lng\": '103.8198'},\r\n      places: [],\r\n      activePlace: ''\r\n    };\r\n\r\n    this.handleMenuClick = this.handleMenuClick.bind(this);\r\n    this.setFoodItem = this.setFoodItem(this);\r\n    this.handleSortButton = this.handleSortButton.bind(this);\r\n    this.handleRandomButtonClick = this.handleRandomButtonClick.bind(this); \r\n    this.handleShopGridClick = this.handleShopGridClick.bind(this);\r\n    this.setCurrLoc = this.setCurrLoc.bind(this);\r\n  }\r\n\r\n  handleMenuClick() {\r\n    this.setState({extended: !this.state.extended});\r\n  }\r\n\r\n  handleSortButton(choice) {\r\n    // choice -> \"distance\" or \"rating\"\r\n    const sortedShops = filterShops(choice, this.state.places, this.state.location)\r\n    this.setState({places: sortedShops})\r\n    console.log(\"shoplist sorted\", sortedShops)\r\n  }\r\n\r\n  async handleRandomButtonClick() {\r\n    //randomise places\r\n    random_food([]).then((selectFood) => {\r\n      this.state.setFoodItem(selectFood.food_name);\r\n    });    \r\n  }\r\n\r\n  handleShopGridClick(activePlace) {\r\n    this.setState({ activePlace: activePlace })\r\n    console.log(\"activePlace: \", activePlace)\r\n  }\r\n\r\n  setCurrLoc = async (location) => {\r\n    this.setState({ location: { \"lat\": location.lat, \"lng\": location.lng }})\r\n    console.log(\"new location: \", this.state.location)\r\n    let places = await getPlaces(this.state.foodItem, this.state.location.lat, this.state.location.lng)\r\n    this.setState({places: places})\r\n  }\r\n\r\n  setFoodItem = async (food) => {\r\n    \r\n    this.setState({foodItem: food});\r\n    console.log(food)\r\n    \r\n    if (this.state.foodItem != '') {\r\n      let places = await getPlaces(this.state.foodItem, this.state.location.lat, this.state.location.lng)\r\n      this.setState({places: places});\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(\"location updated\")\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition((position) => {\r\n        let lat = position.coords.latitude;\r\n        let lng = position.coords.longitude;\r\n        this.setState({location: { \"lat\": lat, \"lng\": lng }});\r\n        console.log(this.state.location)\r\n      });\r\n    } else {\r\n      console.log(\"geolocation not available\");\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    console.log(\"app rendered\");\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition((position) => {\r\n        let lat = position.coords.latitude;\r\n        let lng = position.coords.longitude;\r\n        this.setState({location: { \"lat\": lat, \"lng\": lng }});\r\n        console.log(this.state.location)\r\n      });\r\n    } else {\r\n      console.log(\"geolocation not available\");\r\n    }\r\n    \r\n    return (\r\n      <FoodContext.Provider value={this.state}>\r\n        <body className=\"body-container\">\r\n          <div>\r\n            <GoogleMap \r\n            foodItem={this.state.foodItem != ''? this.state.foodItem : this.state.placeholder} \r\n            location={this.state.location} \r\n            places={this.state.places}\r\n            activePlace={this.state.activePlace}\r\n            setCurrLoc={this.setCurrLoc}/>\r\n            \r\n          </div>\r\n          <div className=\"sidebar-navbar\">\r\n            <div className = \"sidebar-container\">\r\n              <Sidebar extended={this.state.extended} setFoodItem={this.setFoodItem}/>\r\n            </div>\r\n            <Navbar onMenuClick={this.handleMenuClick} onRandomClick={this.handleRandomButtonClick} />\r\n          </div>\r\n\r\n          <Shoplist shops={this.state.places} extended={this.state.extended} location={this.state.location} handleSortButton={this.handleSortButton} onShopGridClick={this.handleShopGridClick}/>\r\n        \r\n          \r\n        </body>\r\n      </FoodContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}