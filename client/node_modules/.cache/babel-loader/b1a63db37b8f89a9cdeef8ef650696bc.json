{"ast":null,"code":"import _slicedToArray from\"C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Map,InfoWindow,Marker,GoogleApiWrapper,Size}from\"google-maps-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GoogleMap(props){console.log(props.location);var style={height:'100%',width:'100%'};var _useState=useState(''),_useState2=_slicedToArray(_useState,2),activeMarker=_useState2[0],setActiveMarker=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),activeShop=_useState4[0],setActiveShop=_useState4[1];function onMarkerClick(props,marker,e){console.log(\"marker clicked\");console.log(marker);setActiveMarker(marker);if(props.shop){setActiveShop(props.shop);}else{setActiveShop({\"name\":\"Your location\"});}}function handleMarkerDragEnd(props,marker,e){console.log(e.latLng.lat(),e.latLng.lng());props.setCurrLoc({\"lat\":e.latLng.lat(),\"lng\":e.latLng.lng()});}var createMarkers=function createMarkers(){var markers=props.places.map(function(shop){return/*#__PURE__*/_jsx(Marker,{onClick:onMarkerClick,position:shop['geometry']['location'],title:shop['name'],name:shop['name'],icon:{\"url\":require(\"../resources/images/marker.png\"),\"scaledSize\":new props.google.maps.Size(64,64)}// add shop details as prop into marker\n,shop:shop});});return markers;};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Map,{google:props.google,initialCenter:props.location.lat!=''?props.location:{\"lat\":1.3521,\"lng\":103.8198},zoom:16,style:style,streetViewControl:false,fullscreenControl:false,mapTypeControl:false,children:[/*#__PURE__*/_jsx(Marker,{onClick:onMarkerClick,draggable:true,position:props.mapCenter,onDragend:handleMarkerDragEnd,setCurrLoc:props.setCurrLoc,children:/*#__PURE__*/_jsx(InfoWindow,{visible:true,position:props.mapCenter,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Drag me to your location or enable location access!\"})})})}),createMarkers(),/*#__PURE__*/_jsx(InfoWindow,{visible:true,marker:activeMarker,children:/*#__PURE__*/_jsx(\"div\",{className:\"info-window\",children:/*#__PURE__*/_jsx(\"p\",{children:activeShop.name})})})]})});}export default GoogleApiWrapper({apiKey:\"AIzaSyCopFWv0YMtXgVgDtt5ujO_v_3xbPV-LCA\"// AIzaSyCopFWv0YMtXgVgDtt5ujO_v_3xbPV-LCA\n})(GoogleMap);","map":{"version":3,"names":["React","useEffect","useState","Map","InfoWindow","Marker","GoogleApiWrapper","Size","GoogleMap","props","console","log","location","style","height","width","activeMarker","setActiveMarker","activeShop","setActiveShop","onMarkerClick","marker","e","shop","handleMarkerDragEnd","latLng","lat","lng","setCurrLoc","createMarkers","markers","places","map","require","google","maps","mapCenter","name","apiKey"],"sources":["C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/src/components/GoogleMap.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper, Size } from \"google-maps-react\";\r\n\r\nfunction GoogleMap(props) {\r\n    console.log(props.location)\r\n    const style = {\r\n        height: '100%',\r\n        width: '100%'\r\n    };\r\n    \r\n    const [activeMarker, setActiveMarker] = useState('')\r\n    const [activeShop, setActiveShop] = useState('')\r\n\r\n    function onMarkerClick(props, marker, e) {\r\n        console.log(\"marker clicked\");\r\n        console.log(marker);\r\n        setActiveMarker(marker);\r\n        if (props.shop) {\r\n            setActiveShop(props.shop)\r\n        } else {\r\n            setActiveShop({\"name\":\"Your location\"})\r\n        }\r\n    }\r\n\r\n    function handleMarkerDragEnd(props, marker, e) {\r\n        console.log(e.latLng.lat(), e.latLng.lng())\r\n        props.setCurrLoc( { \"lat\": e.latLng.lat(), \"lng\": e.latLng.lng() })\r\n    }\r\n\r\n    const createMarkers = () => {\r\n        const markers = props.places.map((shop)=> \r\n        <Marker \r\n        onClick={onMarkerClick}\r\n        position={shop['geometry']['location']} \r\n        title={shop['name']} \r\n        name={shop['name']}\r\n        icon={{\r\n            \"url\": require(\"../resources/images/marker.png\"),\r\n            \"scaledSize\": new props.google.maps.Size(64,64)\r\n        }}\r\n        // add shop details as prop into marker\r\n        shop={shop} />\r\n        \r\n        );\r\n        return markers\r\n    }\r\n\r\n    return (\r\n        \r\n        <div>\r\n            \r\n            <Map \r\n            google={props.google} \r\n            initialCenter= {props.location.lat != '' ? props.location : {\"lat\": 1.3521, \"lng\": 103.8198}} \r\n            zoom={16} \r\n            style={style} \r\n            streetViewControl={false} \r\n            fullscreenControl={false} \r\n            mapTypeControl={false}>\r\n                {/* Marker for currect location */}\r\n                <Marker \r\n                onClick={onMarkerClick} \r\n                draggable={true} \r\n                position={props.mapCenter} \r\n                onDragend={handleMarkerDragEnd} \r\n                setCurrLoc={props.setCurrLoc}>\r\n                    <InfoWindow visible={true} position={props.mapCenter}>\r\n                        <div>\r\n                            <p>Drag me to your location or enable location access!</p>\r\n                        </div>\r\n                    </InfoWindow>\r\n                </Marker>\r\n                \r\n                {/* Markers for shops in shopslist */}\r\n                {createMarkers()}\r\n                <InfoWindow visible={true} marker={activeMarker}>\r\n                    <div className=\"info-window\">\r\n                        <p>{activeShop.name}</p>\r\n                    </div>\r\n                </InfoWindow>\r\n            </Map>\r\n            \r\n        </div>\r\n        \r\n    );\r\n    \r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n    apiKey: \"AIzaSyCopFWv0YMtXgVgDtt5ujO_v_3xbPV-LCA\"\r\n    // AIzaSyCopFWv0YMtXgVgDtt5ujO_v_3xbPV-LCA\r\n})(GoogleMap)"],"mappings":"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"},"metadata":{},"sourceType":"module"}