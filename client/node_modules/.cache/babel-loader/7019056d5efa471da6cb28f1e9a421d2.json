{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Zephy\\\\OneDrive\\\\Documents\\\\Personal\\\\Coding\\\\Coding Projects\\\\WhatoEat\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";export function random_food(){return _random_food.apply(this,arguments);}function _random_food(){_random_food=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var foodChoices,getFood,_getFood,randInt,choice,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_getFood=function _getFood3(){_getFood=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,foodChoicesObj,allFood;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(foodChoices.length===0)){_context.next=11;break;}_context.next=3;return fetch(\"/food\");case 3:response=_context.sent;_context.next=6;return response.json();case 6:foodChoicesObj=_context.sent;allFood=Object.values(foodChoicesObj);return _context.abrupt(\"return\",allFood);case 11:return _context.abrupt(\"return\",foodChoices);case 12:case\"end\":return _context.stop();}}},_callee);}));return _getFood.apply(this,arguments);};getFood=function _getFood2(){return _getFood.apply(this,arguments);};foodChoices=_args2.length>0&&_args2[0]!==undefined?_args2[0]:[];_context2.next=5;return getFood();case 5:foodChoices=_context2.sent;randInt=Math.floor(Math.random()*foodChoices.length);choice=foodChoices[randInt];console.log(\"choice: \",choice);return _context2.abrupt(\"return\",choice);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _random_food.apply(this,arguments);}export function convertFiltersFormat(filters){//example format of input:\n// {\n//     fried: \"yes\"\n//     halal: \"either\"\n//     hot: \"either\"\n//     shared: \"yes\"\n//     soup: \"either\"\n//     spicy: \"either\"\n//     vegetarian: \"either\"\n// }\n//example format of output:\n// format of req data\n// {\n//     \"filters\": [\"soup\", \"halal\", \"spicy\"],\n//     \"values\": [true, false, true]\n// }\nfor(var _i=0,_Object$keys=Object.keys(filters);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];if(filters[key]==='either'){delete filters[key];}}return{\"filters\":Object.keys(filters),\"values\":Object.values(filters)};}export function getPlaces(_x,_x2,_x3){return _getPlaces.apply(this,arguments);}function _getPlaces(){_getPlaces=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(keyword,lat,lng){var req,response,body,places,place;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;req={\"search\":keyword,\"lat\":lat,\"lng\":lng};// console.log(req)\n_context3.next=4;return fetch(\"/places\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(req)});case 4:response=_context3.sent;_context3.next=7;return response.json();case 7:body=_context3.sent;places=[];for(place in body){places.push(body[place]);}console.log(places);return _context3.abrupt(\"return\",places);case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0.message);case 17:case\"end\":return _context3.stop();}}},_callee3,null,[[0,14]]);}));return _getPlaces.apply(this,arguments);}export function filterShops(filterBy,shopsList,currLoc){switch(filterBy){case\"default\":console.log(\"filter shops by default\");return shopsList;case\"rating\":console.log(\"filter shops by ratings\");shopsList.sort(function(first,second){return second[\"rating\"]-first[\"rating\"];});console.log(\"new rating sorted list\");console.log(shopsList);return shopsList;case\"distance\":console.log(\"filter shops by distance\");console.log(currLoc);shopsList.sort(function(first,second){console.log(second['geometry']['location'],first['geometry']['location']);var dist2=calcDist(currLoc,second['geometry']['location']);var dist1=calcDist(currLoc,first['geometry']['location']);console.log(dist2,dist1);return dist1-dist2;});console.log(\"new distance sorted list\");console.log(shopsList);return shopsList;}return shopsList;}export function calcDist(curr,dest){var currLat=curr.lat;var currLng=curr.lng;var destLat=dest.lat;var destLng=dest.lng;//convert to Radians\ncurrLat=currLat/(180/Math.PI);destLat=destLat/(180/Math.PI);currLng=currLng/(180/Math.PI);destLng=destLng/(180/Math.PI);var diffLat=destLat-currLat;var diffLng=destLng-currLng;//radius of Earth in KM = 6371\n//Very loooooong formula to calculate distance that I definitely did not google for\nvar distance=6371*2*Math.asin(Math.sqrt(Math.pow(Math.sin(diffLat/2),2)+Math.cos(currLat)*Math.cos(destLat)*Math.pow(Math.sin(diffLng/2),2)));return distance;}","map":{"version":3,"names":["random_food","getFood","foodChoices","length","fetch","response","json","foodChoicesObj","allFood","Object","values","randInt","Math","floor","random","choice","console","log","convertFiltersFormat","filters","keys","key","getPlaces","keyword","lat","lng","req","method","headers","body","JSON","stringify","places","place","push","error","message","filterShops","filterBy","shopsList","currLoc","sort","first","second","dist2","calcDist","dist1","curr","dest","currLat","currLng","destLat","destLng","PI","diffLat","diffLng","distance","asin","sqrt","pow","sin","cos"],"sources":["C:/Users/Zephy/OneDrive/Documents/Personal/Coding/Coding Projects/WhatoEat/client/src/utils/utils.js"],"sourcesContent":["export async function random_food(foodChoices=[]) {\r\n    async function getFood() {\r\n        if (foodChoices.length === 0) {\r\n            const response = await fetch(\"/food\");\r\n            const foodChoicesObj = await response.json();\r\n            const allFood = Object.values(foodChoicesObj);\r\n            return allFood\r\n        } else {\r\n            return foodChoices\r\n        }\r\n        \r\n    }\r\n    foodChoices = await getFood();\r\n    const randInt = Math.floor(Math.random()*foodChoices.length);\r\n    const choice = foodChoices[randInt];\r\n    console.log(\"choice: \", choice)\r\n    return choice\r\n}\r\n\r\nexport function convertFiltersFormat(filters) {\r\n    //example format of input:\r\n    // {\r\n    //     fried: \"yes\"\r\n    //     halal: \"either\"\r\n    //     hot: \"either\"\r\n    //     shared: \"yes\"\r\n    //     soup: \"either\"\r\n    //     spicy: \"either\"\r\n    //     vegetarian: \"either\"\r\n    // }\r\n\r\n    //example format of output:\r\n    // format of req data\r\n    // {\r\n    //     \"filters\": [\"soup\", \"halal\", \"spicy\"],\r\n    //     \"values\": [true, false, true]\r\n    // }\r\n    \r\n    for (let key of Object.keys(filters)) {\r\n        if (filters[key] === 'either') {\r\n            delete filters[key];\r\n        }\r\n    }\r\n    return {\"filters\": Object.keys(filters), \"values\": Object.values(filters)}\r\n}\r\n\r\nexport async function getPlaces(keyword, lat, lng) {\r\n    try {\r\n        let req = {\"search\": keyword, \"lat\": lat, \"lng\": lng}\r\n        // console.log(req)\r\n        const response = await fetch(\"/places\", {method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(req)});\r\n        const body = await response.json()\r\n        let places = []\r\n        for (let place in body) {\r\n            places.push(body[place])\r\n        }\r\n        console.log(places)\r\n        return places\r\n    }\r\n    catch (err) {\r\n        console.error(err.message)\r\n    }\r\n    \r\n}\r\n\r\nexport function filterShops(filterBy, shopsList, currLoc) {\r\n    switch(filterBy) {\r\n        case \"default\":\r\n            console.log(\"filter shops by default\")\r\n            return shopsList\r\n\r\n        case \"rating\":\r\n            console.log(\"filter shops by ratings\")\r\n            shopsList.sort((first, second) => {\r\n                return second[\"rating\"] - first[\"rating\"]\r\n            })\r\n            console.log(\"new rating sorted list\")\r\n            console.log(shopsList)\r\n            return shopsList\r\n\r\n        case \"distance\":\r\n            console.log(\"filter shops by distance\")\r\n            console.log(currLoc)\r\n            shopsList.sort((first, second) => {\r\n                console.log(second['geometry']['location'], first['geometry']['location'])\r\n                let dist2 = calcDist(currLoc, second['geometry']['location']);\r\n                let dist1 = calcDist(currLoc, first['geometry']['location']);\r\n                console.log(dist2, dist1)\r\n                return dist1 - dist2\r\n            })\r\n            console.log(\"new distance sorted list\")\r\n            console.log(shopsList)\r\n            return shopsList\r\n    } \r\n    \r\n    return shopsList\r\n}\r\n\r\n\r\n\r\nexport function calcDist(curr, dest) {\r\n    let currLat = curr.lat;\r\n    let currLng = curr.lng;\r\n    let destLat = dest.lat;\r\n    let destLng = dest.lng;\r\n    //convert to Radians\r\n    currLat = currLat/(180/Math.PI);\r\n    destLat = destLat/(180/Math.PI);\r\n    currLng = currLng/(180/Math.PI);\r\n    destLng = destLng/(180/Math.PI);\r\n\r\n    const diffLat = destLat - currLat;\r\n    const diffLng = destLng - currLng;\r\n    //radius of Earth in KM = 6371\r\n    //Very loooooong formula to calculate distance that I definitely did not google for\r\n    const distance = 6371 * 2* Math.asin(Math.sqrt(Math.pow(Math.sin(diffLat/2),2) + Math.cos(currLat) * Math.cos(destLat) * Math.pow(Math.sin(diffLng / 2), 2)));\r\n    return distance\r\n}   "],"mappings":"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"},"metadata":{},"sourceType":"module"}